<p align="center">
  <a href="" rel="noopener">
 <img style="max-width: 100%;" src="/image/home.png" alt="Patient Management System"></a>
</p>

<h3 align="center">Onlymovies</h3>

---

## Description

A user-friendly movies web application enables users to effortlessly search for and view films. It's important to note that the actual playback feature is unavailable, as the movies are sourced from an external API. Users can efficiently filter movies by title, release date, and rating while also having the ability to like or unlike their preferred films. In addition to movie exploration, this application offers a variety of interactive games for leisurely entertainment, providing an engaging user experience.

Click <a href="https://github.com/liabilityquek/Movies_App_python">here</a> to view the backend repo.

## Timeframe

8 days

## Deployment

The application is deployed on Vercel. You would need to <a href="https://onlymovies-umber.vercel.app">create</a> an account to access the application.
The backend is deployed on <a href="https://movies-app-python.onrender.com">Render</a>.


## Features
<li>CRUD model on favourites, likes, game and subscription</li>
<li>Using RESTFul Routes</li>
<li>Error validation on both the client and the backend server</li>
<li>Adopt the MVC approach; Model, View and Controller</li>

## Technologies & Tools Used
<li><a href="https://github.com/liabilityquek/Movies_App_python">Flask</a></li>
<li>Javascript</li>
<li>Material UI</li>
<li>Git commands</li>
<li>React</li>
<li>Mongoose</li>
<li>Python</li>
<li>Vite</li>
<li>Moments</li>
<li>JWT</li>
<br>

## Wireframe</a>
<li>Login form</li>
<li>Sign Up Page</li>
<li>Forget Password</li>
<li>Logout button</li>
<li>Page to show user's favourite movies</li>
<li>Page to show trending movie search</li>
<li>Page to view my account status</li>
<li>Page to view my games for playing</li>
<li>Page to create, amend and delete games</li>
</li>
<br>

## User Stories</a>
<li>As a new user, I want to sign up for the application using my name, email, and password, so that I can access the movie recommendation feature.</li>
<li>As an existing user, I want to log in to the application with my email and password, so that I can access my personalized movie favourites.</li>
<li>As a logged-in user, I want to search for a movie using keywords or phrases, so that the application can provide relevant movie recommendations.</li>
<li>As a logged-in user, I want to see a list of trending movie searches that include the movie title, poster, description, and rating, so that I can make an informed decision about what to watch.</li>
<li>As a logged-in user, I want to log out of the application, so that my account is secure when I am not using it.</li>
<li>As a logged-in user, I want to be able to cancel/reinstate/amend my subscription plans.</li>
<li>As a logged-in user, I want to be able to access to different games for leisure playing.</li>
<li>As a logged-in admin user, I want to be able to create, amend and delete games.</li>
<li>As a logged-in admin user, I want to log out of the application, so that my account is secure when I am not using it.</li>
<br>

## Login/Forget/Reset</a>

<br>
 <p align="center">
  <a href="" rel="noopener">
 <img style="max-width: 100%;" src="/images/login.png" alt="Login"></a>
</p>
<br>
 <p align="center">
  <a href="" rel="noopener">
 <img style="max-width: 100%;" src="/images/forget password.png" alt="Forget Password"></a>
</p>
<br>
 <p align="center">
  <a href="" rel="noopener">
 <img style="max-width: 100%;" src="/images/new user.png" alt="Create User"></a>
</p>

## User - Customer</a>

<br>
 <p align="center">
  <a href="" rel="noopener">
 <img style="max-width: 100%;" src="/images/home.png" alt="home"></a>
</p>
<br>
 <p align="center">
  <a href="" rel="noopener">
 <img style="max-width: 100%;" src="/images/adding to favourites.png" alt="adding to favourites"></a>
</p>
<br>
 <p align="center">
  <a href="" rel="noopener">
 <img style="max-width: 100%;" src="/images/account.png" alt="account"></a>
 <br>
 <p align="center">
  <a href="" rel="noopener">
 <img style="max-width: 100%;" src="/images/amend subscription.png" alt="amend subscription"></a>
 <br>
 <p align="center">
  <a href="" rel="noopener">
 <img style="max-width: 100%;" src="/images/cancel subscription with trial.png" alt="cancel subscription with trial"></a>
  <br>
 <p align="center">
  <a href="" rel="noopener">
 <img style="max-width: 100%;" src="/images/cancel subscription.png" alt="cancel subscription"></a>
  <br>
 <p align="center">
  <a href="" rel="noopener">
 <img style="max-width: 100%;" src="/images/delete favourites.png" alt="delete favourites"></a>
   <br>
 <p align="center">
  <a href="" rel="noopener">
 <img style="max-width: 100%;" src="/images/directing to the game site.png" alt="directing to game site"></a>
   <br>
 <p align="center">
  <a href="" rel="noopener">
 <img style="max-width: 100%;" src="/images/favourites filter.png" alt="favourites filter"></a>
</p>
   <br>
 <p align="center">
  <a href="" rel="noopener">
 <img style="max-width: 100%;" src="/images/games.png" alt="games"></a>
</p>
   <br>
 <p align="center">
  <a href="" rel="noopener">
 <img style="max-width: 100%;" src="/images/view trending search results.png" alt="trending search results"></a>
</p>

## User - Admin</a>
 <p align="center">
  <a href="" rel="noopener">
 <img style="max-width: 100%;" src="/images/admin.png" alt="admin page"></a>
</p>
<br>
 <p align="center">
  <a href="" rel="noopener">
 <img style="max-width: 100%;" src="/images/amend game details.png" alt="amending game details"></a>
</p>
<br>

## Deliverables Timeline
<strong><u>Day 1:</u></strong>
<li>Writing up user stories, wireframe and data model</li>
<li>Setting up Flask</li>
<li>Reading Flask documentation</li>
<br>
<strong><u>Day 2:</u></strong>
<li>Setting up Flask</li>
<li>Reading Flask documentation</li>
<br>
<strong><u>Day 3:</u></strong>
<br>
<li></li>
<li>Writing up the data model and routes in python</li>
<li>Testing backend using Postman</li>
<li>Working on React components</li>
<br>
<strong><u>Day 4:</u></strong>
<br>
<li>Working on React components</li>
<br>
<strong><u>Day 5:</u></strong>
<br>
<li>Working on React components</li>
<br>
<br>
<strong><u>Day 6:</u></strong>
<br>
<li>Working on React components</li>
<br>
<br>
<strong><u>Day 7:</u></strong>
<br>
<li>Working on React components</li>
<li>Re-work on data model to cater for subscription</li>
<li>Working on subscription dates</li>
<br>
<strong><u>Day 8:</u></strong>
<br>
<li>Working on React components</li>
<li>Wrap up</li>
<br>

## Key Takeaways
These are key takeaways when working on the project:
<li>Separate key requirements of the project and "nice to have"</li>
<li>Research early when working on new framework</li>
<li>Assign meaningful name to functions for easy readability</li>
<li>Using the MVC approach to keep codes organised</li>

<br>

<strong><u>Patient Data Model Validation:</u></strong>
```js
const patientSchema = new Schema(
  {
    nricfin: {
      type: String,
      unique: true,
      required: true,
      match: /^[0-9]{4}[A-Za-z]{1}$/,
      minlength: 5,
      message: "NRIC/FIN must be 5 characters long",
    },
    name: {
      type: String,
      unique: true,
      required: true,
    },
    contactno: {
      type: String,
      unique: true,
      required: true,
    },
    dob: {
      type: Date,
      required: true,
    },
    gender: {
      type: String,
      required: true,
      enum: ["MALE", "FEMALE"],
      validate: {
        validator: function (v) {
          return ["MALE", "FEMALE"].includes(v);
        },
        message: "Invalid gender type",
      },
    },
    nationality: {
      type: String,
      required: true,
      enum: ["SINGAPOREAN", "WORK PERMIT", "PR", "S-PASS", "E-PASS"],
      validate: {
        validator: function (v) {
          return [
            "SINGAPOREAN",
            "WORK PERMIT",
            "PR",
            "S-PASS",
            "E-PASS",
          ].includes(v);
        },
        message: "Invalid Nationality",
      },
    },
    streetaddress: {
      type: String,
      required: true,
    },
    postalcode: {
      type: String,
      required: true,
      validate: {
        validator: function (v) {
          return (v.toString().length = 6);
        },
        message: "Postal Code must be 6 digits long",
      },
    },
    unitno: {
      type: String,
      required: true,
    },
    drugallergies: {
      type: [String],
      required: true,
    },
    vaccination: {
      type: String,
      required: true,
      enum: ["YES", "NO"],
      validate: {
        validator: function (v) {
          return ["YES", "NO"].includes(v);
        },
        message: "Invalid option",
      },
    },
    vaccinationtype: {
      type: String,
      enum: [" ", "PFIZER", "MODERNA", "NOVAVAX", "SINOVAC"],
      validate: {
        validator: function (v) {
          return [" ", "PFIZER", "MODERNA", "NOVAVAX", "SINOVAC"].includes(v);
        },
        message: "Invalid vaccination type",
      },
    },

    log: [patientLogSchema],
  },

```
<br>

<strong><u>Mongoose Validation Error in controller to view:</u></strong>

```js
const createPatient = async (req, res) => {

  try {

    if (req.body.drugallergies) {
      req.body.drugallergies = req.body.drugallergies.split(/\s*,\s*/);
    }

    const patient = new Patient({
      ...req.body,
    });
    const newPatient = await patient.save(); //update
    console.log(`newPatient: ${newPatient}`);
    res.redirect("/patients");
  } 
  catch (err) {
    if (err.code === 11000) {
      console.log(`Duplicate error: ${err}`);
      res.render("patients/error", { message: "Duplicate record!" });
    } else if (err.name === "ValidationError") {
      const errors = Object.values(err.errors).map((e) => e.message);
      console.log(`Data Model Errors: ${errors}`);
      res.render("patients/error", { message: errors });
    } else {
      console.log(err);
      res.render("patients/error", { message: err });
    }
  }
};
```
<br>

<strong><u>Validation Error in EJS:</u></strong>

```html

<div>
      <input type="text" name="nricfin" required placeholder=" " onkeyup="this.value = this.value.toUpperCase();"
        pattern="[0-9]{4}[A-Za-z]{1}" required />
      <label for="nricfin">NRIC/FIN Example: 1234A</label>
      <div class="requirements">
        Please enter 4 digits followed by 1 alphabet.
      </div>
    </div>

    <div>
      <input type="text" name="name" required placeholder=" " onkeyup="this.value = this.value.toUpperCase();"
        required />
      <label for="name">Name</label>

    </div>
```

## Future Enhancements
<p>As this application is part of a project submission, there would not be an future amendments made to this.</p>However, if there were any future enhancements to be made, these would be the following changes:</p>
<li>Insert a Stripe payment gateway</li>
<li>Using OAuth</li>

<br>
## References
Various sources which I have seek guidance from:
</li>
<li><a href=https://www.npmjs.com/package/react-material-ui-carousel>Material UI Carousel</a>
</li>
<li><a href=https://dev.to/nagatodev/how-to-connect-flask-to-reactjs-1k8i>How to connect flask to reactjs</a>
</li>
<li><a href=https://flask-bcrypt.readthedocs.io/en/1.0.1>Flask Bcrypt</a>
</li>
<li><a href=https://www.geeksforgeeks.org/python-try-except>Python try except</a>
</li>
<li><a href=https://flask-cors.readthedocs.io/en/latest>Configuring Flask CORS</a>
</li>
<li><a href=https://rest-apis-flask.teclado.com/docs/flask_jwt_extended/token_refreshing_flask_jwt_extended>Token resfreshing Flask JWT Extended</a>
</li>
<li><a href=https://developers.themoviedb.org/3/getting-started/introduction>External API for movies database</a>
</li>
<br>

## Application Asset Attribution
The CSS in this project does not belong to me. All rights belong to the original artists and owners. Below are the links to the CSS used in this project:
<li><a href=https://icons8.com/icons/set/movie>Movie Icon</a>
</li>
<li><a href=https://www.freeiconspng.com/downloadimg/23500>Not available image</a>
</li>

